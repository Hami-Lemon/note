# git系列学习 -- 一 、起步

## Git 简史

Linux内核开源项目有着为数众多的参与者。绝在多数的Linux内核维护工作都花在了提交补丁和保存归档的繁琐事务上。到2002年，整个项目组开始启用一个专有的分布式版本控制系统BitKeeper来管理和维护代码

到了2005年，开发BitKeeper的商业公司赋Linux内核开源社区的合作关系结束，他们收回了Linux内核社区免费使用BitKeeper的权力。这就迫使Linux开源社区基于使用时的经验教训，开发出自己的版本系统。

## Git是什么

### 直接记录快照,而非差异比较

Git和其它版本控制系统的主要差别在于git对待数据的方式。从概念 上来说，其它大部分系统以文件变更列表的方式存储信息，这类系统将它们存储的信息看作是一组基本文件随时间逐步累积的差异（通常称作**基于差异（delta-based)**的版本控制。

Git则更像是把数据看作是对小型文件系统的一系列快照。在git中，每当你提交更新或保存项目状态时，它基本上就会对当时的全部文件创建一个快照并保存这个快照的索引。为了效率，如果文件没有修改，git不再重新存储该文件，而是只保留一个链接指向之前存储的文件。git对待数据更像是一个快照流。

![存储项目随时间改变的快照](https://gitee.com/Hami-Lemon/image-repo/raw/master/images/2021/05/25/20210525112628.png)

这是git与几乎所有其它版本控制系统的重要区别。因此git重新考虑了以前每一代版本控制系统延续下来的诸多方面。git更像是一个小型的文件系统，提供了许多以此为基础构建的超强工具，而不只是一个简单的VCS。

### 近乎所有操作都是本地执行

在git中绝在多数操作都中需要访问本地文件和资源，一般不需要来自网络上其它计算机的信息。

例如，要浏览项目的历史，git不需外连到服务器去获取历史，然后再显示出来，它只需直接从本地数据库中读取，你能立即看到项目历史。

### git保证完整性

git中所有的数据在存储前都计算校验和，然后以校验和来引用。这意味着不可能在git不知情时更改任何文件内容或目录内容。

git用以计算校验和的机制叫做SHA-1散列。这是一个由40个十六进制字符组成的字符串，基于git中文件的内容或目录结构计算出来。

### 三种状态！

git中有三种状态，文件可能处于其中这一: 

- **已修改(modified)**: 修改了文件，但还没保存到数据库中
- **已暂存(staged))**：对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中
- **已提交（committed)**：数据已经安全地保存在本地数据库中

这会让git项目拥有三个区域：工作区、暂存区和git目录

![三种状态](https://gitee.com/Hami-Lemon/image-repo/raw/master/images/2021/05/25/20210525112632.png)

- 工作区是对项目的某个版本独立提取出来的内容，这些从git仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。
- 暂存区是一个文件，保存了下次将要提交的文件万列表信息，一般在git仓库目录中。
- git仓库目录是git用来保存项目元数据和对象数据库的地方。

## 初次运行git前的配置

git自带一个`git config`的工具来帮助设置控制git外观和行为的配置变量，这些变量存储在三个不同的位置：

1. `/etc/gitconfig`(windows系统在git安装目录下的`etc/gitconfig`):包含系统上每一个用户的通用配置。执行`git config`时带上`--system`时，将会修改此文件的值
2. `~/.gitconfig或~/.config/git/config`(windows系统中的`~`路径位于`C:\User\$USER`)：只针对当前用户。使用`--global`选项修改此文件，会对系统上**所有**的仓库生效
3. 当前git仓库中`.git/config`：仅针对该仓库，使用`--local`选项修改此文件，默认情况下用的就是该文件

每一级别会覆盖上一级别的配置，所以`.git/config`会覆盖`/etc/gitconfig`中的配置

可以使用以下命令查看所有配置和所在的文件：

```shell
git config --list --show-origin
```

### 用户信息

设置用户名和邮件地址，git在每次提交时都会使用这些信息，会写入每一次提交中，不可更改（可以通过特殊方式修改）：

```shell
git config --global user.name "usser name"
git config --global user.email "email@example.com"
```

### 文本编辑器

当git需要输入信息时会调用它，未配置时则使用系统默认的编辑器

```shell
# 使用vim作为文本编辑器
# windows中需要提供exe文件的完整路径，或加入到环境变量中
git config --global core.editor vim
```

### 检查配置信息

```shell
git config --list
# 查看某一个具体的配置信息
git config user.name
```

### 设置别名

`git config --global alias.cm commit`

## 获取帮助

```shell
# 会对应帮助页面的网页（离线的）
git help <verb>
git <verb> --help
git <verb> -h # 只输入简单的帮助信息
# windows不支持
man git-<verb>
```

